---
layout: default
comments: true
---
{% include breadcrumbs.html parent="Datasets" %}
{% assign schema = page.schema | default: site.schema %}
{% assign dataset_fields = site.data.schemas[schema].dataset_fields %}
{% assign dataset_system_fields = "title|organization|notes|license|update_freq|date_issued|date_modified" | split: "|" %}
{% assign resource_fields = site.data.schemas[schema].resource_fields %}
{% assign resource_system_fields = "name|url|format|description" | split: "|" %}

{% assign organization = site.organizations | where:"title",page.organization | first %}
{% capture organization_url %}{{ site.baseurl }}/datasets/?organization={{ organization.title | slugify }}{% endcapture %}

<div data-component="view-switcher">
  <div class="row" data-component="dataset-display" data-hook="view" data-view="display" typeof="dcat:Dataset" resource="{{ page.url }}" style="display:block">
    {% if organization %}
    <div class="col-sm-3" property="dct:publisher" resource="{{ organization_url }}">
      <div class="panel panel-default">
        <div class="panel-heading">
          {% if organization.logo and organization.logo != empty %}
          <a href="{{ site.baseurl }}/datasets/?organization={{ organization.title | slugify }}" class="thumbnail"><img src="{{ organization.logo }}" alt="{{ organization.title }} logo"></a>
          {% endif %}
        </div>
        <div class="panel-body">
          <h3>
            <a href="{{ organization_url }}" about="{{ organization_url }}" property="foaf:homepage">
              <span property="foaf:name">{{ organization.title }}</span>
            </a>
          </h3>
          {{ organization.description }}
        </div>
      </div>
    </div>
    <div class="col-sm-9">
      {% else %}
      <div class="col-sm-12">
        {% endif %}
        <h1>
          <span property="dct:title">{{ page.title }}</span>
        </h1>
        <p property="dct:description" style="text-align: justify; overflow-wrap: break-word;">{{ page.notes }}</p>

        <h2>Andmefailid</h2>
        <ul>
          {% for resource in page.resources %}
          <li data-hook="resource-item" property='dcat:distribution' typeof='dcat:Distribution'>
            <a href="{{ resource.url }}" property='dcat:accessURL'><span property="dct:title">{{ resource.name }}</span></a>
            {% if resource.format %}<span class="label label-default" property='dcat:mediaType'>{{ resource.format}}</span>{% endif %}
            <a href="#" class="show-resource-details" data-hook="show-resource-details">(Rohkem)</a>
            {% if resource.description %}<div class="resource-description">{{ resource.description }}</div>{% endif %}
            <table class="table table-striped table-condensed resource-details" data-hook="resource-details">
              {% for field in resource_fields %}
              {% unless resource_system_fields contains field.field_name %}
              {% assign value = resource[field[field_name]] %}
              {% if value != empty %}
              {% if field.display_template %}
              {% include {{ field.display_template }} field=field value=value %}
              {% else %}
              <tr>
                <th>{{ field.label }}</th>
                <td>{{ value }}</td>
              </tr>
              {% endif %}
              {% endif %}
              {% endunless %}
              {% endfor %}
            </table>
          </li>
          {% endfor %}
        </ul>

        <h2>Lisainformatsioon</h2>
        <table class="table table-striped dataset-details">
          <tr>
            <th>Kasutuslitsents</th>
            <td>
              <a property="dct:license" resource="{{ page.license }}" href="{{ page.license }}">
                {{ site.data.licenses[page.license] }}
              </a>
            </td>
          </tr>
          <tr>
            <th>Uuendussagedus</th>
            <td>
              <a href="{{ page.update_freq }}" property="dcat:accrualPeriodicity">
                {{ site.data.frequencies[page.update_freq] }}
              </a>
            </td>
          </tr>
          <tr>
            <th>Lisatud Portaali (YYYY-MM-DD)</th>
            <td property="dct:created" content="{{ page.date_issued }}" datatype='xs:date'> {{ page.date_issued }}</td>
          </tr>
          <tr>
            <th>Viimati muudetud (YYYY-MM-DD)</th>
            <td property="dct:modified" content="{{ page.date_modified }}" datatype='xs:date'> {{ page.date_modified }}</td>
          </tr>
          {% for field in dataset_fields %}
          {% unless dataset_system_fields contains field.field_name %}
          {% assign value = page[field[field_name]] %}
          {% if value %}
          {% if field.display_template %}
          {% include {{ field.display_template }} field=field value=value %}
          {% else %}
          <tr>
            <th>{{ field.label }}</th>
            <td>{{ value }}</td>
          </tr>
          {% endif %}
          {% endif %}
          {% endunless %}
          {% endfor %}
        </table>
        {% if page.comments %}
        <div id="disqus_thread"></div>
        <script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/

var disqus_config = function () {
this.page.identifier = "{{ page.url }}"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://avaandmed.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

{% endif %}

      </div>
    </div>
  </div>
</div>
